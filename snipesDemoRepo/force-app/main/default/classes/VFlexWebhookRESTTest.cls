@isTest
public class VFlexWebhookRESTTest {
    public static final String TEST_RECORD = '{"id":"01F8QTD10QA8Q55V8S5N0SX1H9","brandId":"SNIPES-01-062920","webhookId":"b05a3595-8f42-4fe1-afd7-b8b4cf7b80ef","attemptId":"01F8QTD1BAYC80AFVGRPJ7RZX2","created":"2021-06-21T17:37:59.831714Z","type":"ORDER_EVENTS.OMS.ORDER_CONFIRMED","data":{"requestId":"STG_00013312-OrderCreated-220490525","timestamp":"2021-06-21T17:30:56.562165500Z","order":{"id":"STG_00013312","online":true},"retailerEventType":"OrderCreated","eventType":"ORDER_CONFIRMED","data":{"Version":"1","Action":"OrderCreated","OrderNumber":"STG_00013312","OrderID":"110899","TransactionID":"1631","OrderType":"shipping","ParentLinkedOrderID":null,"ParentLinkedExternalOrderID":null,"ChildLinkedOrderID":null,"ChildLinkedExternalOrderID":null,"TransactionDate":"2021-06-21T17:30:56.5621655Z","OrderDate":"2021-06-21T13:29:36","OrderStatus":"Ordered, Payment Authorized","AffiliateID":"115","AffiliateExternalID":"1999","AffiliateCompany":"KicksUSA-EcommDC","AffiliateType":"2","OrderTotal":37.99,"OrderTotalShipping":7.99,"OrderTotalTax":0.0,"CurrencyCode":"USD","CouponCode":"","SalesAssociate":"","SalesAssociateNumber":"","GiftCardAmount":0.0,"ServicesCreditShipDate":null,"CustomData1":"CREDIT_CARD","CustomData2":"","CustomData3":"","CustomData4":"","CustomData5":"","Customer":{"CustomerID":163565,"CrmID":"999900435432","ExternalCustomerID":"","Emails":[{"Email":"jordan.cohen@snipesusa.com"}],"BillingAddress":{"AddressID":219650,"ExternalId":"","FirstName":"Jordan","LastName":"C","Company":"","Address1":"2030 Byberry Rd","Address2":"","City":"Phila","State":"PA","Zip":"19116-3016","Country":"USA","PhoneNumbers":[{"Phone":"2155551212","Type":"Billing Phone"}],"Items":null}},"CustomAttributes":[{"ID":704,"AttributeName":"StoreNumber","Value":"1999","Option":""},{"ID":705,"AttributeName":"WorkstationNumber","Value":"99","Option":""},{"ID":706,"AttributeName":"SalesAssociateNumber","Value":"9999","Option":""},{"ID":707,"AttributeName":"UseAffiliateExternalIDAsStoreNumber","Value":"No","Option":"Yes (default) or No (if No, then use StoreNumber from above)"}],"OrderShippingAddresses":[{"AddressID":219650,"ExternalId":"","FirstName":"Jordan","LastName":"C","Company":"","Address1":"2030 Byberry Rd","Address2":"","City":"Phila","State":"PA","Zip":"19116-3016","Country":"USA","PhoneNumbers":[{"Phone":"2155551212","Type":"Shipping Phone"}],"Items":[{"ItemID":"111182","ItemType":"I","OrderItemType":"shipping","ItemStatusId":"4","ItemStatusDescription":"Ordered","Quantity":1,"ItemPrice":30.0,"ItemCost":0.0,"ItemTotal":30.0,"ItemShipping":0.0,"ItemShippingTracking":"","ItemShippingCarrierName":"Fedex","ItemShippingCarrierService":"Smart Post","ItemCreditAmount":0.0,"ItemDiscountDetailsTotal":0.0,"ItemCouponAmount":0.0,"ItemTax":0.0,"ItemShippingTax":0.0,"ItemLineNumber":1,"ItemTransactionDate":"2021-06-21T13:29:36","SupplierName":"","ItemGiftWrap":false,"ItemGiftWrapCost":0.0,"ItemPersonalization":"","ItemCustomData1":"","ItemCustomData2":"","ItemCustomData3":"","ItemCustomData4":"","ItemCustomData5":"","ItemProduct":{"ProductID":399271,"ProductName":"ALL STAR LOW WHITE","SKU":"1000016815","AlternateSKU":"","UPC":"","OptionID":35457,"OptionSKU":"1558000027","OptionUPC":"022859348447","OptionAlternateSKU":"1558000027","OptionText":"Color=No Color;Size=5C"},"ItemTaxAuthorities":{"ItemTaxAuthorities":[{"ItemTaxAuthorityID":111181,"ItemID":111182,"TaxAuthName":"Unknown","TaxAuthID":1,"TaxAuthZoneID":199,"TaxAuthAmount":0.0,"TaxAuthUnroundedAmount":0.0,"TaxAuthIsVAT":false,"TaxAuthVATCode":"","TaxAuthRate":0.0,"TaxAuthRuleID":199,"TaxAuthNumber":199}]},"ItemDiscounts":{"ItemDiscounts":[{"ItemDiscountID":869,"ItemID":111182,"ItemDiscNo":null,"ItemDiscName":"","ItemDiscDesc":"","ItemDiscIsAtCost":false,"ItemDiscAmount":0.0,"ItemDiscLevel":"","ItemDiscIsLoyalty":false,"ItemDiscIsEmployee":false,"ItemDiscAuthorizedBy":"","ItemDiscAuthorizedByCaptureMethod":"","ItemDiscPromoNo":null,"ItemDiscPromoName":"","ItemDiscReasonCode":"","ItemDiscReasonDesc":"","ItemDiscGenInfo":"","ItemDiscCouponNo":"","ItemDiscPercent":null}]},"MerchPONumber":"","GiftWrapTaxRate":"","GiftWrapTaxAmount":"","ReturnLocation":null,"ReturnOption":null,"LineType":null},{"ItemID":"111182","ItemType":"S","OrderItemType":null,"ItemStatusId":null,"ItemStatusDescription":null,"Quantity":0,"ItemPrice":0.0,"ItemCost":0.0,"ItemTotal":7.99,"ItemShipping":7.99,"ItemShippingTracking":null,"ItemShippingCarrierName":null,"ItemShippingCarrierService":null,"ItemCreditAmount":null,"ItemDiscountDetailsTotal":null,"ItemCouponAmount":null,"ItemTax":0.0,"ItemShippingTax":0.0,"ItemLineNumber":1,"ItemTransactionDate":"2021-06-21T13:29:36","SupplierName":null,"ItemGiftWrap":false,"ItemGiftWrapCost":0.0,"ItemPersonalization":null,"ItemCustomData1":null,"ItemCustomData2":null,"ItemCustomData3":null,"ItemCustomData4":null,"ItemCustomData5":null,"ItemProduct":null,"ItemTaxAuthorities":null,"ItemDiscounts":null,"MerchPONumber":null,"GiftWrapTaxRate":null,"GiftWrapTaxAmount":null,"ReturnLocation":null,"ReturnOption":null,"LineType":null}]}],"ShipmentLevelTax":{"TotalTax":0.0,"ItemTaxAuthorities":{"ItemTaxAuthorities":[{"ItemTaxAuthorityID":0,"ItemID":0,"TaxAuthName":"Unknown","TaxAuthID":1,"TaxAuthZoneID":199,"TaxAuthAmount":0.0,"TaxAuthUnroundedAmount":0.0,"TaxAuthIsVAT":false,"TaxAuthVATCode":"","TaxAuthRate":0.0,"TaxAuthRuleID":199,"TaxAuthNumber":199}]}},"Payments":[{"ID":330536,"AuthID":330536,"TransactionType":"AUTHORIZATION","Amount":37.99,"AmountCaptured":0.0,"AmountFulFilled":0.0,"AmountRemaining":0.0,"CreateDate":"2021-06-21T13:30:00","PaymentTender":"AmericanExpress","TypeCode":"Credit Card","TypeID":"1","AuthOrderNumber":"831000","CardAuthCode":"6242965786066601704012","RequestToken":"Axj/7wSTUm6N8cb5GPpMABsZSlSpNKi2qs60yqojiRKfnoBURxIlPz1pAztcSUhk0ky9GLByCWBOTUm6N8cb5GPpMAAA5xs/","SettlementData":null,"CreditType":null,"CreditID":null,"ItemID":null,"GiftCardNumber":null,"GiftCardPIN":null,"ProviderRefNum":null,"CardExp":"11/2021","PaymentDisplay":"************1111"}],"Tenders":null},"notificationChannels":[{"channelType":"EMAIL","emailAddress":"jordan.cohen@snipesusa.com","attachmentUrls":[],"provided":false,"digital":true}],"items":[{"id":"1000016815","name":"ALL STAR LOW WHITE","status":"CONFIRMED","quantity":1,"description":"1558000027, Color=No Color;Size=5C","customAttributes":{"OptionUPC":"022859348447","OptionText":"Color=No Color;Size=5C","ProductName":"ALL STAR LOW WHITE","OptionID":"35457","OptionAlternateSKU":"1558000027","UPC":"","OptionSKU":"1558000027","ProductID":"399271","AlternateSKU":"","SKU":"1000016815"}}],"shipments":[],"pickups":[],"eventId":"6642469a-ea58-4e84-8874-8c32f2fe3fe7"}}';

    @isTest
    static void testPost() {
        RestContext.request = new RestRequest();
        RestContext.request.requestBody = Blob.valueOf(TEST_RECORD);
        RestContext.response = new RestResponse();

        VFlexWebhookREST.doPost();
    }

    @isTest
    static void testError() {
        VFlexWebhookREST.OrderErrorHandler handler = new VFlexWebhookREST.OrderErrorHandler(new List<VFlexWebhookREST.PutResponse>());
        handler.handleError('code', 'message');
    }
}